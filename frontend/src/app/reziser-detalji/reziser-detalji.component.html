<div class="reziser-wrapper">
  <!-- Back Button -->
  <button class="btn-back" (click)="goBack()">
    â† Nazad na katalog
  </button>

  <!-- Loading Spinner -->
  @if (loading) {
    <div class="loading">
      <div class="spinner"></div>
      <p>UÄitavanje reÅ¾isera...</p>
    </div>
  }

  <!-- Reziser Content -->
  @if (!loading && reziser) {
    <div class="reziser-container">
      <!-- Header Section -->
      <div class="reziser-header">
        @if (safeReziser.profilnaSlika) {
          <img [src]="safeReziser.profilnaSlika" [alt]="safeReziser.ime" class="profile-image">
        } @else {
          <div class="profile-placeholder">
            <span>ğŸ“½ï¸</span>
          </div>
        }

        <div class="reziser-info">
          <h1>{{ safeReziser.ime }}</h1>
          <div class="info-grid">
            <div class="info-item">
              <span class="info-label">ğŸ“ Mesto:</span>
              <span class="info-value">{{ safeReziser.mestoRodjenja }}</span>
            </div>
            <div class="info-item">
              <span class="info-label">ğŸ¬ Aktivnost:</span>
              <span class="info-value">{{ safeReziser.godine }}</span>
            </div>
          </div>
        </div>
      </div>

      <!-- Biografija Section -->
      <div class="biografija-section">
        <h2>ğŸ“– Biografija</h2>
        <p>{{ safeReziser.biografija }}</p>
      </div>

      <!-- Statistike Section -->
      @if (statistike) {
        <div class="statistike-section">
          <h2>ğŸ“Š Statistike karijere</h2>
          <div class="statistike-grid">
            <div class="stat-card">
              <div class="stat-icon">ğŸ¬</div>
              <div class="stat-value">{{ statistike.ukupnoFilmova }}</div>
              <div class="stat-label">ReÅ¾iranih filmova</div>
            </div>
            <div class="stat-card">
              <div class="stat-icon">â­</div>
              <div class="stat-value">{{ statistike.prosecnaOcena.toFixed(1) }}</div>
              <div class="stat-label">ProseÄna ocena</div>
            </div>
            <div class="stat-card">
              <div class="stat-icon">ğŸ­</div>
              <div class="stat-value">{{ statistike.najcesciZanr }}</div>
              <div class="stat-label">NajÄeÅ¡Ä‡i Å¾anr</div>
            </div>
            <div class="stat-card">
              <div class="stat-icon">ğŸ†</div>
              <div class="stat-value">{{ statistike.najuspesnijiFilm }}</div>
              <div class="stat-label">NajuspeÅ¡niji film</div>
            </div>
          </div>
        </div>
      }

      <!-- Å½anr Distribucija Grafikon -->
      @if (zanrDistribucija.length > 0) {
        <div class="grafikon-section">
          <h2>ğŸ“Š Distribucija Å¾anrova</h2>
          <p class="grafikon-opis">
            Procentualna zastupljenost svih Å¾anrova u filmografiji reÅ¾isera {{ reziserIme }}.
            <span class="grafikon-napomena">* Jedan film moÅ¾e pripadati viÅ¡e Å¾anrova, tako da je ukupan zbir procenata veÄ‡i od 100%.</span>
          </p>
          <div class="pie-chart-container">
            <canvas
              baseChart
              [data]="pieChartData"
              [options]="pieChartOptions"
              [type]="'pie'">
            </canvas>
          </div>
        </div>
      }

      <!-- Timeline Section -->
      @if (timelineEvents.length > 0) {
        <div class="timeline-section">
          <h2>â±ï¸ Hronologija karijere</h2>
          <div class="timeline">
            @for (event of timelineEvents; track event.godina + event.tekst) {
              <div class="timeline-item" [class]="'timeline-' + event.tip">
                <div class="timeline-marker">
                  <span class="timeline-icon">{{ event.ikona }}</span>
                </div>
                <div class="timeline-content">
                  <div class="timeline-year">{{ event.godina }}</div>
                  <div class="timeline-text">{{ event.tekst }}</div>
                </div>
              </div>
            }
          </div>
        </div>
      }

      <!-- Social Media Section -->
      @if (safeSocialMedia && (safeSocialMedia.imdb || safeSocialMedia.rottenTomatoes)) {
        <div class="social-section">
          <h2>ğŸŒ Online profili</h2>
          <div class="social-links">
            @if (safeSocialMedia.imdb) {
              <a [href]="safeSocialMedia.imdb" target="_blank" class="social-link imdb">
                <span class="social-icon">â­</span>
                <span>IMDb</span>
              </a>
            }
            @if (safeSocialMedia.rottenTomatoes) {
              <a [href]="safeSocialMedia.rottenTomatoes" target="_blank" class="social-link rotten-tomatoes">
                <span class="social-icon">ğŸ…</span>
                <span>Rotten Tomatoes</span>
              </a>
            }
          </div>
        </div>
      }

      <!-- Zanimljivosti Section -->
      @if (safeReziser.zanimljivosti && safeReziser.zanimljivosti.length > 0) {
        <div class="zanimljivosti-section">
          <h2>âœ¨ Zanimljivosti</h2>
          <div class="zanimljivosti-list">
            @for (zanimljivost of safeReziser.zanimljivosti; track $index) {
              <div class="zanimljivost-item">
                <span class="bullet">ğŸ¯</span>
                <p>{{ zanimljivost }}</p>
              </div>
            }
          </div>
        </div>
      }

      <!-- Nagrade Section -->
      @if (safeReziser.nagrade && safeReziser.nagrade.length > 0) {
        <div class="nagrade-section">
          <h2>ğŸ† Nagrade i priznanja</h2>
          <div class="nagrade-grid">
            @for (nagrada of safeReziser.nagrade; track $index) {
              <div class="nagrada-card">
                <span class="trophy-icon">ğŸ†</span>
                <p>{{ nagrada }}</p>
              </div>
            }
          </div>
        </div>
      }
    </div>
  }

  <!-- Error State -->
  @if (!loading && !reziser) {
    <div class="error-state">
      <h2>ğŸ˜• ReÅ¾iser nije pronaÄ‘en</h2>
      <p>Ne moÅ¾emo pronaÄ‡i informacije o reÅ¾iseru "{{ reziserIme }}"</p>
      <button class="btn-back" (click)="goBack()">
        Nazad na katalog
      </button>
    </div>
  }
</div>
