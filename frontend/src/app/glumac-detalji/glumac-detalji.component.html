<div class="glumac-wrapper">
  <div class="glumac-container">

    <!-- Back Button -->
    <button class="btn-back" (click)="goBack()">â† Nazad</button>

    <!-- Loading State -->
    @if (loading) {
      <div class="loading">
        <div class="spinner"></div>
        <p>UÄitavanje...</p>
      </div>
    }

    <!-- Glumac Details -->
    @if (!loading) {
      <!-- Header sa profilnom slikom -->
      <div class="glumac-header">
        <div class="glumac-profile">
          @if (glumac?.profilnaSlika) {
            <img [src]="safeGlumac.profilnaSlika!" [alt]="glumacIme" class="profile-image" />
          } @else {
            <div class="profile-placeholder">
              <span class="inicijali">{{ glumac?.inicijali || 'N/A' }}</span>
            </div>
          }
        </div>

        <div class="glumac-info">
          <h1 class="glumac-name">{{ glumacIme }}</h1>

          <div class="glumac-basic-info">
            @if (glumac?.datumRodjenja) {
              <div class="info-item">
                <span class="info-icon">ğŸ‚</span>
                <span class="info-text">{{ formatDatum(safeGlumac.datumRodjenja) }} ({{ safeGlumac.godinaStarosti }} godina)</span>
              </div>
            }

            @if (glumac?.mestoRodjenja) {
              <div class="info-item">
                <span class="info-icon">ğŸ“</span>
                <span class="info-text">{{ safeGlumac.mestoRodjenja }}</span>
              </div>
            }

            @if (glumac?.statusAktivnosti) {
              <div class="info-item">
                <span class="info-icon">ğŸ¬</span>
                <span class="info-text">Aktivnost u glumi: {{ safeGlumac.statusAktivnosti }}</span>
              </div>
            }
          </div>
        </div>
      </div>

      <!-- Biografija -->
      @if (glumac?.biografija) {
        <div class="biografija-section">
          <h2>ğŸ“– Biografija</h2>
          <p class="biografija-text">{{ safeGlumac.biografija }}</p>
        </div>
      }

      <!-- Statistike -->
      @if (statistike) {
        <div class="statistike-section">
          <h2>ğŸ“Š Statistike karijere</h2>
          <div class="statistike-grid">
            <div class="stat-card">
              <div class="stat-icon">ğŸ¬</div>
              <div class="stat-value">{{ statistike.ukupnoFilmova }}</div>
              <div class="stat-label">Ukupno filmova</div>
            </div>
            <div class="stat-card">
              <div class="stat-icon">â­</div>
              <div class="stat-value">{{ statistike.prosecnaOcena.toFixed(1) }}</div>
              <div class="stat-label">ProseÄna ocena</div>
            </div>
            <div class="stat-card">
              <div class="stat-icon">ğŸ­</div>
              <div class="stat-value">{{ statistike.najcesciZanr }}</div>
              <div class="stat-label">NajÄeÅ¡Ä‡i Å¾anr</div>
            </div>
            <div class="stat-card">
              <div class="stat-icon">ğŸ¥</div>
              <div class="stat-value">{{ statistike.najcesciReziser }}</div>
              <div class="stat-label">NajÄeÅ¡Ä‡i reÅ¾iser</div>
            </div>
          </div>
        </div>
      }

      <!-- Å½anr Distribucija Grafikon -->
      @if (zanrDistribucija.length > 0) {
        <div class="grafikon-section">
          <h2>ğŸ“Š Distribucija Å¾anrova</h2>
          <p class="grafikon-opis">
            Procentualna zastupljenost svih Å¾anrova u filmografiji glumca {{ safeGlumac.ime }}.
            <span class="grafikon-napomena">* Jedan film moÅ¾e pripadati viÅ¡e Å¾anrova, tako da je ukupan zbir procenata veÄ‡i od 100%.</span>
          </p>
          <div class="chart-container">
            @for (item of zanrDistribucija; track item.zanr) {
              <div class="chart-bar-wrapper">
                <div class="chart-label">
                  <span class="zanr-name">{{ item.zanr }}</span>
                  <span class="zanr-count">{{ item.broj }} {{ item.broj === 1 ? 'film' : 'filmova' }}</span>
                </div>
                <div class="chart-bar-container">
                  <div
                    class="chart-bar"
                    [style.width.%]="item.procenat"
                    [attr.data-procenat]="item.procenat.toFixed(1) + '%'">
                  </div>
                </div>
              </div>
            }
          </div>
        </div>
      }

      <!-- Timeline karijere -->
      @if (timelineEvents.length > 0) {
        <div class="timeline-section">
          <h2>â±ï¸ Hronologija karijere</h2>
          <div class="timeline">
            @for (event of timelineEvents; track event.godina + event.tekst) {
              <div class="timeline-item" [class]="'timeline-' + event.tip">
                <div class="timeline-marker">
                  <span class="timeline-icon">{{ event.ikona }}</span>
                </div>
                <div class="timeline-content">
                  <div class="timeline-year">{{ event.godina }}</div>
                  <div class="timeline-text">{{ event.tekst }}</div>
                </div>
              </div>
            }
          </div>
        </div>
      }

      <!-- Social Media -->
      @if (glumac?.socialMedia) {
        <div class="social-section">
          <h2>ğŸŒ Online profili</h2>
          <div class="social-links">
            @if (safeSocialMedia.imdb) {
              <a [href]="safeSocialMedia.imdb" target="_blank" rel="noopener" class="social-link imdb">
                <span class="social-icon">â­</span>
                <span>IMDb</span>
              </a>
            }
            @if (safeSocialMedia.rottenTomatoes) {
              <a [href]="safeSocialMedia.rottenTomatoes" target="_blank" rel="noopener" class="social-link rotten-tomatoes">
                <span class="social-icon">ğŸ…</span>
                <span>Rotten Tomatoes</span>
              </a>
            }
          </div>
        </div>
      }

      <!-- Zanimljivosti -->
      @if (glumac?.zanimljivosti && safeGlumac.zanimljivosti.length > 0) {
        <div class="zanimljivosti-section">
          <h2>âœ¨ Zanimljivosti</h2>
          <div class="zanimljivosti-list">
            @for (zanimljivost of safeGlumac.zanimljivosti; track zanimljivost) {
              <div class="zanimljivost-item">
                <span class="bullet">ğŸ’¡</span>
                <p>{{ zanimljivost }}</p>
              </div>
            }
          </div>
        </div>
      }

      <!-- Nagrade -->
      @if (glumac?.nagrade && safeGlumac.nagrade.length > 0) {
        <div class="nagrade-section">
          <h2>ğŸ† Nagrade i priznanja</h2>
          <div class="nagrade-list">
            <div *ngFor="let nagrada of safeGlumac.nagrade" class="nagrada-item">
              <span class="nagrada-icon">ğŸ†</span>
              <span class="nagrada-text">{{ nagrada }}</span>
            </div>
          </div>
        </div>
      }
    }

  </div>
</div>
